name: tailscale-funnel-manager

services:
  tailscale-funnel-manager:
    image: willianquintino/tailscale-funnel-manager:latest
    container_name: tailscale-funnel-manager
    restart: unless-stopped
    ports:
      - target: 8080
        published: ${WEBUI_PORT:-8080}
        protocol: tcp
    volumes:
      - type: bind
        source: /DATA/AppData/$AppID/data
        target: /app/data
      - type: bind
        source: /DATA/AppData/$AppID/tailscale
        target: /var/lib/tailscale
      - type: bind
        source: /var/run/docker.sock
        target: /var/run/docker.sock
        read_only: false
    privileged: true
    network_mode: bridge
    environment:
      - TZ=$TZ
      - PUID=$PUID
      - PGID=$PGID
      - PYTHONUNBUFFERED=1
    x-casaos:
      envs:
        - container: TZ
          description:
            en_US: Timezone setting for the container
            pt_BR: Configuração de fuso horário para o container
        - container: PUID
          description:
            en_US: User ID for file permissions
            pt_BR: ID do usuário para permissões de arquivo
        - container: PGID
          description:
            en_US: Group ID for file permissions
            pt_BR: ID do grupo para permissões de arquivo
      ports:
        - container: "8080"
          description:
            en_US: Web interface port
            pt_BR: Porta da interface web
      volumes:
        - container: /app/data
          description:
            en_US: Application data and configuration
            pt_BR: Dados e configuração da aplicação
        - container: /var/lib/tailscale
          description:
            en_US: Tailscale state and configuration
            pt_BR: Estado e configuração do Tailscale
        - container: /var/run/docker.sock
          description:
            en_US: Docker socket for container discovery
            pt_BR: Socket Docker para descoberta de containers

x-casaos:
  architectures:
    - amd64
    - arm64
  main: tailscale-funnel-manager
  author: WillianQuintino
  category: Network
  description:
    en_US: A modern web interface to create and manage Tailscale Funnels for your CasaOS containers. Automatically discovers running containers and their ports, allowing you to expose services to the internet securely through Tailscale's encrypted network. Features include one-click funnel creation, real-time monitoring, and comprehensive container discovery.
    pt_BR: Uma interface web moderna para criar e gerenciar Tailscale Funnels para seus containers CasaOS. Descobre automaticamente containers em execução e suas portas, permitindo expor serviços para a internet de forma segura através da rede criptografada do Tailscale. Inclui criação de funnel com um clique, monitoramento em tempo real e descoberta abrangente de containers.
  developer: WillianQuintino
  icon: https://cdn.jsdelivr.net/gh/WillianQuintino/casaos-tailscale-appstore@main/Apps/tailscale-funnel-manager/icon.png
  tagline:
    en_US: Secure web exposure for your CasaOS containers via Tailscale Funnel
    pt_BR: Exposição web segura para seus containers CasaOS via Tailscale Funnel
  title:
    en_US: Tailscale Funnel Manager
    pt_BR: Gerenciador Tailscale Funnel
  tips:
    before_install:
      en_US: |
        1. You need a Tailscale account (free at https://tailscale.com)
        2. Generate an auth key at https://login.tailscale.com/admin/settings/keys
        3. Ensure your CasaOS server can access the internet
        4. Only ports 443, 8443, and 10000 are supported for Tailscale Funnels
      pt_BR: |
        1. Você precisa de uma conta Tailscale (gratuita em https://tailscale.com)
        2. Gere uma chave de autenticação em https://login.tailscale.com/admin/settings/keys
        3. Certifique-se de que seu servidor CasaOS pode acessar a internet
        4. Apenas as portas 443, 8443 e 10000 são suportadas para Tailscale Funnels
    after_install:
      en_US: |
        1. Access the web interface at http://your-server:${WEBUI_PORT:-8080}
        2. Enter your Tailscale auth key in the authentication section
        3. Wait for Tailscale to connect and authenticate
        4. Your CasaOS containers will be automatically discovered
        5. Click on port buttons to create funnels with one click
        6. Access your services from anywhere using the generated HTTPS URLs
      pt_BR: |
        1. Acesse a interface web em http://seu-servidor:${WEBUI_PORT:-8080}
        2. Insira sua chave de autenticação Tailscale na seção de autenticação
        3. Aguarde o Tailscale conectar e autenticar
        4. Seus containers CasaOS serão descobertos automaticamente
        5. Clique nos botões de porta para criar funnels com um clique
        6. Acesse seus serviços de qualquer lugar usando as URLs HTTPS geradas
  thumbnail: https://cdn.jsdelivr.net/gh/WillianQuintino/casaos-tailscale-appstore@main/Apps/tailscale-funnel-manager/thumbnail.png
  index: /
  port_map: ${WEBUI_PORT:-8080}